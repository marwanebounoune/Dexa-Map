<div class="tab-pane fade" id="modal_description">
    <div class="panel-body">
		<div class="panel panel-white">
			<form method="POST" id="descriptionRapport_form" enctype="multipart/form-data" class="stepy-clickable">
				{% csrf_token %}
				<h3> Facteurs liés à l'immeuble </h3>
				<section>
					<br>
					<div class="row">
						<div class="col-md-12">
							<div class="row">
								<div class="col-md-4">
									<div class="form-group">
										<label>Age de l'immeuble:</label>
										<select name="ageImm" data-placeholder="Select position" class="select">
											<option></option>
											<optgroup label="Age de l'immeuble" >
												<option value="3"> < 5 ans</option>
												<option value="2">entre 5 et 10 ans</option>
												<option value="1">entre 10 et 20 ans</option>
												<option value="0">Supérieur à 20 ans</option>
											</optgroup>
										</select>
									</div>
								</div>
								<div class="col-md-4">
									<div class="form-group">
										<label>Nombre de niveaux:</label>
										<input type="text" class="file-styled" id="rapport_id_description" name="rapport_id_description" style="display:none"/>
										<input type="number" name="nbrNiv" min="0" max="51" class="form-control" placeholder="Nombre de niveaux">
									</div>
								</div>
								<div class="col-md-4">
									<div class="form-group">
										<label>Niveau(étage):</label>
										<input type="number" name="niv" min="0" max="51" class="form-control" placeholder="Niveaux(étage)">
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="row">
								<div class="col-md-4">
									<div class="form-group">
										<label>Nombre d'appartements par étages:</label>
										<input type="number" name="nbrApptEtg" min="1" max="10" class="form-control" placeholder="Nombre d'appartements par étages">
									</div>
								</div>
								<div class="col-md-4">
									<label>Stationnement:</label>
									<select name="stationnement" data-placeholder="Select position" class="select">
										<option></option>
										<optgroup label="Parking" >
											<option value="1">Pas de Parking</option>
											<option value="2">Parking dans l'indivision</option>
											<option value="3">Parking titré</option>
										</optgroup>
									</select>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="row">
								<div class="col-md-3">
									<div class="form-group">
										<label>Ascenceur:</label>
										<br>
										<div class="radio-inline">
											<label>Non
											<input type="radio" class="styled"  name="radioAscenceur" value="0" checked/></label>
										</div>
										<br>
										<div class="radio-inline">
											<label>Oui
											<input type="radio" class="styled"  name="radioAscenceur" value="1"/></label>
										</div>
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-group">
										<label>Exploitation en étages:</label>
										<br>
										<div class="radio-inline">
											<label>Mixte
											<input type="radio" class="styled"  name="radioExpEtage" value="0" checked/></label>
										</div>
										<br>
										<div class="radio-inline">
											<label>Résidentiel
											<input type="radio" class="styled"  name="radioExpEtage" value="1" /></label>
										</div>
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-group">
										<label>Exploitation en RDC:</label>
										<br>
										<div class="radio-inline">
											<label>Commercial
											<input type="radio" class="styled"  name="radioExpRdc" value="0" checked/></label>
										</div>
										<br>
										<div class="radio-inline">
											<label>Résidentiel
											<input type="radio" class="styled"  name="radioExpRdc" value="1" /></label>
										</div>
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-group">
										<label>Accès à mobilité réduite:</label>
										<br>
										<div class="radio-inline">
											<label>Non
											<input type="radio" class="styled"  name="radioAccMobRed" value="0" checked/></label>
										</div>
										<br>
										<div class="radio-inline">
											<label>Oui
											<input type="radio" class="styled"  name="radioAccMobRed" value="1"/></label>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<br>
					<div class="row">					
						<div class="col-md-6">
							<div class="form-group">
								<h1>Sécurité</h1>
								<br>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<label>Accès interphone:</label>
											<br>
											<div class="radio-inline">
												<label>Non
												<input type="radio" class="styled"  name="radioAccInterphone" value="0" checked/></label>
											</div>
											<br>
											<div class="radio-inline">
												<label>Oui
												<input type="radio" class="styled"  name="radioAccInterphone" value="1"/></label>
											</div>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<label>Résidence sécurisée :</label>
											<br>
											<div class="radio-inline">
												<label>Non
												<input type="radio" class="styled"  name="radioResidenceSecurisee" value="0" checked/></label>
											</div>
											<br>
											<div class="radio-inline">
												<label>Oui
												<input type="radio" class="styled"  name="radioResidenceSecurisee" value="1"/></label>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
				<h3> Facteurs liés à l'appartemnent </h3>
				<section>
					<br>
					<div class="row">
						<label>Composition:</label>
						<div class="col-md-12">
							<div class="row">
								<div class="col-md-3">
									<div class="form-group">
										<label>Nombre de cuisine:</label>
										<input type="number" name="nbrCuisine" min="0" class="form-control" placeholder="Nombre de cuisine">
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-group">
										<label>Nombre de SDB:</label>
										<input type="number" name="nbrSDB" min="0" class="form-control" placeholder="Nombre de SDB">
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-group">
										<label>Nombre de Salon:</label>
										<input type="number" name="nbrSalon" min="0" class="form-control" placeholder="Nombre de salon">
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-group">
										<label>Nombre de Chambres:</label>
										<input type="number" name="nbrChambres" min="0" class="form-control" placeholder="Nombre de chambres">
									</div>
								</div>
							</div>
						</div>
					</div>
					<div>
						<div class="row">
							<div class="col-md-12">
								<div class="row">
									<div class="col-md-3">
										<div class="form-group">
											<label>Donne sur:</label>
											<br>
											<div class="radio-inline">
												<label>
												<input type="checkbox" class="styled"  name="checkboxDonneSurRue" value="1" />&nbsp; Rue</label>
											</div>
											<br>
											<div class="radio-inline">
												<label>
												<input type="checkbox" class="styled"  name="checkboxDonneSurCour" value="1"/>&nbsp; Cour</label>
											</div>
											<br>
											<div class="radio-inline">
												<label>
												<input type="checkbox" class="styled"  name="checkboxDonneSurEspCom" value="1"/>&nbsp; Espace commun (jardin)</label>
											</div>
										</div>
									</div>
									<div class="col-md-3">
										<div class="form-group">
											<label>Orientation:</label>
											<br>
											<div class="radio-inline">
												<label>
												<input type="checkbox" class="styled"  name="checkboxOrientationNord" value="1"/>&nbsp; Nord</label>
											</div>
											<br>
											<div class="radio-inline">
												<label>
												<input type="checkbox" class="styled"  name="checkboxOrientationSud" value="1"/>&nbsp; Sud</label>
											</div>
											<br>
											<div class="radio-inline">
												<label>
												<input type="checkbox" class="styled"  name="checkboxOrientationNeutre" value="1"/>&nbsp; Neutre</label>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
				<h3> Standing </h3>
				<section>
					<br>
					<div class="row">
						<div class="col-md-12">
							<div id="example-grid"></div>
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-md-12">
							<div class="row">
								<div class="col-md-3">
									<div class="form-group">
										<label>Fenêtres :</label>
										<br>
										<div class="radio-inline">
											<label>Menuiserie massif vernis
											<input type="radio" class="styled"  name="radioFenetres" value="0" checked/></label>
										</div>
										<br>
										<div class="radio-inline">
											<label>Menuiserie bois peint
											<input type="radio" class="styled"  name="radioFenetres" value="1"/></label>
										</div>
										<br>
										<div class="radio-inline">
											<label>Aluminum
											<input type="radio" class="styled"  name="radioFenetres" value="2"/></label>
										</div>
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-group">
										<label>Type d'aluminum:</label>
										<br>
										<div class="radio-inline">
											<label>PVC
											<input type="radio" class="styled"  name="radioTypeFenetres" value="0" checked/></label>
										</div>
										<br>
										<div class="radio-inline">
											<label>Aluminum
											<input type="radio" class="styled"  name="radioTypeFenetres" value="1"/></label>
										</div>
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-group">
										<br>
										<div class="radio-inline">
											<label>Manuel
											<input type="radio" class="styled"  name="ManuelElectrique" value="0" checked/></label>
										</div>
										<br>
										<div class="radio-inline">
											<label>Electrique
											<input type="radio" class="styled"  name="ManuelElectrique" value="1"/></label>
										</div>
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-group">
									<label class="form-label select-label">Portes</label>
									<select name="portes" class="select" data-placeholder="Select position">
										<option></option>
											<optgroup label="Portes" >
												<option value="1">Bois massif noble vernis</option>
												<option value="2">Isoplane avec contreplaqué vernis</option>
												<option value="3">Préfabriqué avec relief</option>
												<option value="4">Préfabriqué simple</option>
												<option value="5">sapin rouge peint</option>
											</optgroup>
									</select>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
				<h3> Equipements </h3>
				<section>
					<br>
					<div class="row">
						<div class="col-md-4">
							<div class="form-group">
								<label>Climatiseurs:</label>
								<br>
								<div class="radio-inline">
									<label>
									<input type="checkbox" class="styled"  name="checkboxClimatiseurSalon" autocomplete="off" value="1"/>&nbsp; Salon</label>
								</div>
								
								<br>
								<div class="radio-inline">
									<label>
									<input type="checkbox" class="styled"  name="checkboxClimatiseurChambre" autocomplete="off" value="1"/>&nbsp; Chambre</label>
								</div>
								
								<br>
								<div class="radio-inline">
									<label>
									<input type="checkbox" class="styled"  name="checkboxClimatiseurNeant" autocomplete="off" value="1"/>&nbsp; Néant</label>
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label>SDB:</label>
								<br>
								<div class="radio-inline">
									<label>
									<input type="checkbox" class="styled"  name="checkboxSdbBaignoire" autocomplete="off" value="1"/>&nbsp; Baignoire</label>
								</div>
								
								<br>
								<div class="radio-inline">
									<label>
									<input type="checkbox" class="styled"  name="checkboxSdbDouche" autocomplete="off" value="1"/>&nbsp; Douche</label>
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<div class="form-group">
								<label>Cuisine équipée:</label>
								<br>
								<div class="radio-inline">
									<label>
									<input type="radio" class="styled"  name="radioCuisineEquip" value="0" checked="checked" autocomplete="off"/>&nbsp; Non</label>
								</div>
								<br>
								<div class="radio-inline">
									<label>
									<input type="radio" class="styled"  name="radioCuisineEquip" value="1" autocomplete="off"/>&nbsp; Oui</label>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
					</div>
				</section>
				<button type="submit" class="btn btn-primary stepy-finish" style="margin: 15px;float: right; display: none;">Submit <i class="icon-check position-right"></i></button>
			</form>
		</div>
    </div>
</div>

<script>
	var data_standing =[
		['', 'Chambres', 'Cuisine', 'WC', 'Hall-Salon'],
		['Sol', 'Carreau', 'Marbre', 'Parquet', 'Granito'],
		['Mur', 'peinture simple', 'peinture décorative', 'carreau', 'carreau à mi hauteur', 'carreau à 100%', 'marbre', 'tadellakt', 'chiffoné', 'paillette', 'khayal','papier peint'],
		['Plafond', 'staff simple', 'staff déco', 'corniche plate', 'enduit peinture', 'ennduit']

	]
	var container = document.getElementById('example-grid');
	var hot_ac_strict_init = new Handsontable(container, {
		data: Handsontable.helper.createSpreadsheetData(4, 3),
		stretchH: 'all',
		manualColumnResize: true,
		width: '100%',
		
		colWidths: 100,
		width: '100%',
		
		height: 180,
		rowHeaderWidth: 180,
		rowHeaders: ['Chambres', 'Cuisine', 'WC', 'Hall-Salon'],
		colHeaders: ['Sol', 'Mur', 'Plafond'],
		columns: [
			{
				data: 'Sol',
				type: 'autocomplete',
				source: ['Carreau', 'Marbre', 'Parquet', 'Granito'],
			// strict: true
			},
			{
				data: 'Mur',
				type: 'autocomplete',
				source: ['Peinture simple', 'Peinture décorative', 'Carreau', 'Carreau à mi hauteur', 'Carreau à 100%', 'Marbre', 'Tadellakt', 'Chiffoné', 'Paillette', 'Khayal','Papier peint']
			},
			{
				data: 'Plafond',
				type: 'autocomplete',
				source: ['staff simple', 'staff déco', 'corniche plate', 'enduit peinture', 'ennduit']
			}
		],
		licenseKey: 'non-commercial-and-evaluation'
	});
	hot_ac_strict_init.refreshDimensions();
	window.setTimeout(function(){ 
		hot_ac_strict_init.render();
		hot_ac_strict_init.refreshDimensions(); 
	});
	$(".stepy-clickable").stepy();
	$("#descriptionRapport_form").steps({
		headerTag: "h3",
		bodyTag: "section",
		transitionEffect: "fade",
		onFinished: function (event, currentIndex) {
			var data_hot_ac_strict_init = hot_ac_strict_init.getData();
			console.log("data_hot_ac_strict_init : ", data_hot_ac_strict_init)
			console.log($("#rapport_id_description").val())
			event.preventDefault ();
			const formData = new FormData(this);
			formData.append('chambre_sol',data_hot_ac_strict_init['0']['0']);
			formData.append('chambre_mur',data_hot_ac_strict_init['0']['1']);
			formData.append('chambre_plafond',data_hot_ac_strict_init['0']['2']);
			formData.append('cuisine_sol',data_hot_ac_strict_init['1']['0']);
			formData.append('cuisine_mur',data_hot_ac_strict_init['1']['1']);
			formData.append('cuisine_plafond',data_hot_ac_strict_init['1']['2']);
			formData.append('wc_sol',data_hot_ac_strict_init['2']['0']);
			formData.append('wc_mur',data_hot_ac_strict_init['2']['1']);
			formData.append('wc_plafond',data_hot_ac_strict_init['2']['2']);
			formData.append('hallSalon_sol',data_hot_ac_strict_init['3']['0']);
			formData.append('hallSalon_mur',data_hot_ac_strict_init['3']['1']);
			formData.append('hallSalon_plafond',data_hot_ac_strict_init['3']['2']);
			console.log("formData : ", formData)
			var rapport_id = $("#rapport_id_description").val();
			fetch("http://127.0.0.1:8000/rapport/addDescription/"+rapport_id,{
				method: 'POST',//définir la method du submit du form
				mode : 'same-origin',
				credentials: 'same-origin' ,
				body : formData//définir la formulaire pour le url
			})
			.then((resp) => resp.json())
			.then(function(data) {
				if(data.id != null ) {
					notificationSuccess('success message', 'Le descriptif a été ajouter avec succès!' );
				}
				else{
					notification('Erreur, '+ data['message']);
				}
			}); 
		}
		
	});

	/*var hot_ac_strict_init = new Handsontable(container, {
		data: data_standing,
		rowHeaders: true,
		colHeaders: true,
		height: 'auto',
		licenseKey: 'non-commercial-and-evaluation',
		manualColumnResize: true,
		manualRowResize: true
	});
	var hot = new Handsontable(container, {
		data: data_test,
		rowHeaders: true,
		colHeaders: true,
		height: 'auto',
		licenseKey: 'non-commercial-and-evaluation'
	});*/

	

</script>