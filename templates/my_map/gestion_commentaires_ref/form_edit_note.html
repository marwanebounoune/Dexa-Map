<!--editer une note -->
<div class="modal fade" id="edit_note" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&#215;</button>
            <h5 class="modal-title">Editer la Note</h5>
         </div>
         <form method="POST" id="EditNoteForm">
            {% csrf_token %}
            <input type = "text"  id="NoteId" name="note_id" style="display:none">
            <div class="modal-body">
               <div class="form-group">
                  <textarea rows="5" cols="5" class="form-control" placeholder="Votre note" name="old_note_content" id="OldcontentNote"></textarea>
               </div>
               <div class="form-group login-options">
                  <div class="row">
                  </div>
               </div>
               <div class="form-group">
                  <button type="submit" class="btn bg-blue btn-block">Enregistrer les modifications <i class="icon-arrow-right14 position-right"></i></button>
               </div>
            </div>
         </form>
      </div>
   </div>
</div>
<!--/editer une note -->
<script>
      //---------------------------------------------------------Editer la note---------------------------------------------------------
   $("#EditNoteForm").submit(function( event ) {
      event.preventDefault ();
      const formData = new FormData(this);
      fetch("http://127.0.0.1:8000/notes/update-note-2/",{
         method: 'POST',//définir la method du submit du form
         mode : 'same-origin',
         credentials: 'same-origin' ,
         body : formData//définir la formulaire pour le url
      })
      .then((resp) => resp.json())
      .then(function(data) {
         if(data.length!=0) {
            getNotes(data.pin.id);
            $("#edit_note").modal('toggle');
         }
      }); 
   });
   /* Delete note*/
   function delete_note(pk){
      $('#myDeleteMessage').modal('toggle');
      $('#confirm').off('click').on('click', function(event){
         event.preventDefault();
         checkbox_status = true;
         var url = 'http://127.0.0.1:8000/notes/delete_note/'+pk
         fetch(url)
         .then((resp) => resp.json())
         .then(function(data){
            if(data.id!=0  && typeof data.id != 'undefined'){
               notificationSuccess('Success message', 'La note est supprimér avec succès' );
               $('#myDeleteMessage').modal('toggle');
               $("#content").hide();
            }
            else{
               notification(data['message']);
            }
         });
      });
   }
</script>